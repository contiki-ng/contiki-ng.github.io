<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Contiki-NG: CC13xx/CC26xx Low-Power management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CC13xx/CC26xx Low-Power management<div class="ingroups"><a class="el" href="group__cc26xx.html">The TI CC26xx and CC13xx CPUs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>CC13xx/CC26xx low-power operation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:cc26xx-cc13xx_2lpm_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cc26xx-cc13xx_2lpm_8c.html">lpm.c</a></td></tr>
<tr class="memdesc:cc26xx-cc13xx_2lpm_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver for CC13xx/CC26xx low-power operation. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:cc26xx-cc13xx_2lpm_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cc26xx-cc13xx_2lpm_8h.html">lpm.h</a></td></tr>
<tr class="memdesc:cc26xx-cc13xx_2lpm_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the management of CC13xx/CC26xx low-power operation. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga57464d31f0c0f4d51ef6ce5dd5eb91df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#ga57464d31f0c0f4d51ef6ce5dd5eb91df">LPM_MODULE</a>(n, m, s, w, l)</td></tr>
<tr class="memdesc:ga57464d31f0c0f4d51ef6ce5dd5eb91df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a variable to be used in order to get notifications from LPM.  <a href="#ga57464d31f0c0f4d51ef6ce5dd5eb91df">More...</a><br/></td></tr>
<tr class="separator:ga57464d31f0c0f4d51ef6ce5dd5eb91df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf48ac564185c7e3adc0c5ab750d7a1c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#gaf48ac564185c7e3adc0c5ab750d7a1c3">lpm_shutdown</a> (uint32_t wakeup_pin, uint32_t io_pull, uint32_t wake_on)</td></tr>
<tr class="memdesc:gaf48ac564185c7e3adc0c5ab750d7a1c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the chip in shutdown power mode.  <a href="#gaf48ac564185c7e3adc0c5ab750d7a1c3">More...</a><br/></td></tr>
<tr class="separator:gaf48ac564185c7e3adc0c5ab750d7a1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa40a3007f03bbc646cbc8202b2050b47"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa40a3007f03bbc646cbc8202b2050b47"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#gaa40a3007f03bbc646cbc8202b2050b47">lpm_sleep</a> (void)</td></tr>
<tr class="memdesc:gaa40a3007f03bbc646cbc8202b2050b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter sleep mode. <br/></td></tr>
<tr class="separator:gaa40a3007f03bbc646cbc8202b2050b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27cb75b4e2e78f360a33bc5b8e50bc23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#ga27cb75b4e2e78f360a33bc5b8e50bc23">lpm_drop</a> (void)</td></tr>
<tr class="memdesc:ga27cb75b4e2e78f360a33bc5b8e50bc23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop the cortex to sleep / deep sleep and shut down peripherals.  <a href="#ga27cb75b4e2e78f360a33bc5b8e50bc23">More...</a><br/></td></tr>
<tr class="separator:ga27cb75b4e2e78f360a33bc5b8e50bc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac720f82f6fac28f2775b7526734a0442"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#gac720f82f6fac28f2775b7526734a0442">lpm_register_module</a> (lpm_registered_module_t *module)</td></tr>
<tr class="memdesc:gac720f82f6fac28f2775b7526734a0442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a module for LPM notifications.  <a href="#gac720f82f6fac28f2775b7526734a0442">More...</a><br/></td></tr>
<tr class="separator:gac720f82f6fac28f2775b7526734a0442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gababa63db84775bd21ca3254d01d535bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#gababa63db84775bd21ca3254d01d535bf">lpm_unregister_module</a> (lpm_registered_module_t *module)</td></tr>
<tr class="memdesc:gababa63db84775bd21ca3254d01d535bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a module from LPM notifications.  <a href="#gababa63db84775bd21ca3254d01d535bf">More...</a><br/></td></tr>
<tr class="separator:gababa63db84775bd21ca3254d01d535bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8ae14246c9df775c53eeb9b54a7e8a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa8ae14246c9df775c53eeb9b54a7e8a8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#gaa8ae14246c9df775c53eeb9b54a7e8a8">lpm_init</a> (void)</td></tr>
<tr class="memdesc:gaa8ae14246c9df775c53eeb9b54a7e8a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the low-power mode management module. <br/></td></tr>
<tr class="separator:gaa8ae14246c9df775c53eeb9b54a7e8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c74e1cc37fb4fd94cb3d6254f2b663b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-lpm.html#ga1c74e1cc37fb4fd94cb3d6254f2b663b">lpm_pin_set_default_state</a> (uint32_t ioid)</td></tr>
<tr class="memdesc:ga1c74e1cc37fb4fd94cb3d6254f2b663b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets an IOID to a default state.  <a href="#ga1c74e1cc37fb4fd94cb3d6254f2b663b">More...</a><br/></td></tr>
<tr class="separator:ga1c74e1cc37fb4fd94cb3d6254f2b663b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>CC13xx/CC26xx low-power operation. </p>
<p>Implementation of CC13xx/CC26xx low-power operation functionality.</p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga57464d31f0c0f4d51ef6ce5dd5eb91df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LPM_MODULE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">m, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">w, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">l&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static</span> lpm_registered_module_t n = \</div>
<div class="line">  { NULL, m, s, w, l }</div>
</div><!-- fragment -->
<p>Declare a variable to be used in order to get notifications from LPM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>the variable name to be declared </td></tr>
    <tr><td class="paramname">m</td><td>A pointer to a function which will tell the LPM module the max PM this module is willing to handle. This function will return LPM_MODE_SLEEP, LPM_MODE_DEEP_SLEEP etc. The LPM module will ask all registered modules and will trigger the highest LPM permitted </td></tr>
    <tr><td class="paramname">s</td><td>A pointer to a function which will receive a notification just before entering the low power mode. The callee can prepare for the imminent LPM state. The argument to this function will be the upcoming low power mode. This function can e.g. turn off a peripheral before the LPM module shuts down the power domain. </td></tr>
    <tr><td class="paramname">w</td><td>A pointer to a function which will be called just after we have woken up. This can be used to e.g. turn a peripheral back on. This function is in charge of turning power domains back on. This function will normally be called within an interrupt context. </td></tr>
    <tr><td class="paramname">l</td><td>Power domain locks, if any are required. The module can request that the SERIAL or PERIPH PD be kept powered up at the transition to deep sleep. This field can be a bitwise OR of LPM_DOMAIN_x, so if required multiple domains can be kept powered. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8h_source.html#l00092">92</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8h_source.html">lpm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga27cb75b4e2e78f360a33bc5b8e50bc23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lpm_drop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop the cortex to sleep / deep sleep and shut down peripherals. </p>
<p>Whether the cortex will drop to sleep or deep sleep is configurable. The exact peripherals which will be shut down is also configurable </p>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00539">539</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html">lpm.c</a>.</p>

<p>References <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00388">lpm_sleep()</a>.</p>

<p>Referenced by <a class="el" href="nrf52dk_2contiki-main_8c_source.html#l00129">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1c74e1cc37fb4fd94cb3d6254f2b663b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lpm_pin_set_default_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ioid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets an IOID to a default state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ioid</td><td>IOID_0...</td></tr>
  </table>
  </dd>
</dl>
<p>This will set ioid to sw control, input, no pull. Input buffer and output driver will both be disabled</p>
<p>The function will do nothing if ioid == IOID_UNUSED, so the caller does not have to check board configuration before calling this. </p>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00580">580</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html">lpm.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac720f82f6fac28f2775b7526734a0442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lpm_register_module </td>
          <td>(</td>
          <td class="paramtype">lpm_registered_module_t *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a module for LPM notifications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the data structure with the module definition</td></tr>
  </table>
  </dd>
</dl>
<p>When the LPM module is about to drop to some low power mode, it will first notify all modules about this.</p>
<p>This function must not be called before the module has been initialised with <a class="el" href="group__cc26xx-lpm.html#gaa8ae14246c9df775c53eeb9b54a7e8a8" title="Initialise the low-power mode management module. ">lpm_init()</a>. The code does not perform checks: This is the caller's responsibility. </p>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00559">559</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html">lpm.c</a>.</p>

<p>References <a class="el" href="list_8c_source.html#l00143">list_add()</a>.</p>

<p>Referenced by <a class="el" href="srf06-cc26xx_2launchpad_2board_8c_source.html#l00081">board_init()</a>, <a class="el" href="buzzer_8c_source.html#l00064">buzzer_start()</a>, <a class="el" href="cc26xx-uart_8c_source.html#l00269">cc26xx_uart_init()</a>, and <a class="el" href="soc-trng_8c_source.html#l00191">soc_trng_rand_asynchronous()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf48ac564185c7e3adc0c5ab750d7a1c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lpm_shutdown </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wakeup_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>io_pull</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wake_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put the chip in shutdown power mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wakeup_pin</td><td>The GPIO pin which will wake us up. Must be IOID_0 etc... </td></tr>
    <tr><td class="paramname">io_pull</td><td>Pull configuration for the shutdown pin: IOC_NO_IOPULL, IOC_IOPULL_UP or IOC_IOPULL_DOWN </td></tr>
    <tr><td class="paramname">wake_on</td><td>High or Low (IOC_WAKE_ON_LOW or IOC_WAKE_ON_HIGH) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00092">92</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html">lpm.c</a>.</p>

<p>References <a class="el" href="aux-ctrl_8c_source.html#l00087">aux_ctrl_power_down()</a>, <a class="el" href="aux-ctrl_8c_source.html#l00044">aux_ctrl_register_consumer()</a>, <a class="el" href="list_8c_source.html#l00083">list_head()</a>, <a class="el" href="oscillators_8c_source.html#l00073">oscillators_select_lf_rcosc()</a>, <a class="el" href="oscillators_8c_source.html#l00134">oscillators_switch_to_hf_rc()</a>, and <a class="el" href="cpu_2cc2538_2dev_2watchdog_8c_source.html#l00085">watchdog_periodic()</a>.</p>

<p>Referenced by <a class="el" href="srf06-cc26xx_2sensortag_2button-sensor_8c_source.html#l00076">button_press_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="gababa63db84775bd21ca3254d01d535bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lpm_unregister_module </td>
          <td>(</td>
          <td class="paramtype">lpm_registered_module_t *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a module from LPM notifications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the data structure with the module definition</td></tr>
  </table>
  </dd>
</dl>
<p>When a previously registered module is no longer interested in LPM notifications, this function can be used to unregister it. </p>

<p>Definition at line <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00565">565</a> of file <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html">lpm.c</a>.</p>

<p>References <a class="el" href="list_8c_source.html#l00240">list_remove()</a>.</p>

<p>Referenced by <a class="el" href="buzzer_8c_source.html#l00106">buzzer_stop()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 6 2017 15:45:26 for Contiki-NG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
