<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Contiki-NG: An implementation of MQTT v3.1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">An implementation of MQTT v3.1<div class="ingroups"><a class="el" href="group__apps.html">Application-layer protocols and profiles</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This application is an engine for MQTT v3.1.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:mqtt_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqtt_8c.html">mqtt.c</a></td></tr>
<tr class="memdesc:mqtt_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the Contiki MQTT engine. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:mqtt_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqtt_8h.html">mqtt.h</a></td></tr>
<tr class="memdesc:mqtt_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the Contiki MQTT engine. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga43290b4fd95095e09218029620a67894"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga43290b4fd95095e09218029620a67894">mqtt_event_callback_t</a> )(struct mqtt_connection *m, <a class="el" href="group__mqtt-engine.html#gaca6b39d8cd48e315ea885c3f715a7ff3">mqtt_event_t</a> event, void *data)</td></tr>
<tr class="memdesc:ga43290b4fd95095e09218029620a67894"><td class="mdescLeft">&#160;</td><td class="mdescRight">MQTT event callback function.  <a href="#ga43290b4fd95095e09218029620a67894">More...</a><br/></td></tr>
<tr class="separator:ga43290b4fd95095e09218029620a67894"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaca6b39d8cd48e315ea885c3f715a7ff3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#gaca6b39d8cd48e315ea885c3f715a7ff3">mqtt_event_t</a> </td></tr>
<tr class="memdesc:gaca6b39d8cd48e315ea885c3f715a7ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">MQTT engine events. <br/></td></tr>
<tr class="separator:gaca6b39d8cd48e315ea885c3f715a7ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga47325599f7b63929a44d590a9d950abc"><td class="memItemLeft" align="right" valign="top">mqtt_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga47325599f7b63929a44d590a9d950abc">mqtt_register</a> (struct mqtt_connection *conn, struct process *app_process, char *client_id, <a class="el" href="group__mqtt-engine.html#ga43290b4fd95095e09218029620a67894">mqtt_event_callback_t</a> event_callback, uint16_t max_segment_size)</td></tr>
<tr class="memdesc:ga47325599f7b63929a44d590a9d950abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the MQTT engine.  <a href="#ga47325599f7b63929a44d590a9d950abc">More...</a><br/></td></tr>
<tr class="separator:ga47325599f7b63929a44d590a9d950abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1620a294655deb636329bd8e01f03298"><td class="memItemLeft" align="right" valign="top">mqtt_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga1620a294655deb636329bd8e01f03298">mqtt_connect</a> (struct mqtt_connection *conn, char *host, uint16_t port, uint16_t keep_alive)</td></tr>
<tr class="memdesc:ga1620a294655deb636329bd8e01f03298"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to a MQTT broker.  <a href="#ga1620a294655deb636329bd8e01f03298">More...</a><br/></td></tr>
<tr class="separator:ga1620a294655deb636329bd8e01f03298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaddcf82027650f40ecce36f9593cdc8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#gaaddcf82027650f40ecce36f9593cdc8b">mqtt_disconnect</a> (struct mqtt_connection *conn)</td></tr>
<tr class="memdesc:gaaddcf82027650f40ecce36f9593cdc8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects from a MQTT broker.  <a href="#gaaddcf82027650f40ecce36f9593cdc8b">More...</a><br/></td></tr>
<tr class="separator:gaaddcf82027650f40ecce36f9593cdc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44f6693627d94ddbecb0f354e3826d44"><td class="memItemLeft" align="right" valign="top">mqtt_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga44f6693627d94ddbecb0f354e3826d44">mqtt_subscribe</a> (struct mqtt_connection *conn, uint16_t *mid, char *topic, mqtt_qos_level_t qos_level)</td></tr>
<tr class="memdesc:ga44f6693627d94ddbecb0f354e3826d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribes to a MQTT topic.  <a href="#ga44f6693627d94ddbecb0f354e3826d44">More...</a><br/></td></tr>
<tr class="separator:ga44f6693627d94ddbecb0f354e3826d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga65aacc0e2e4c17dca6780e364a65009d"><td class="memItemLeft" align="right" valign="top">mqtt_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga65aacc0e2e4c17dca6780e364a65009d">mqtt_unsubscribe</a> (struct mqtt_connection *conn, uint16_t *mid, char *topic)</td></tr>
<tr class="memdesc:ga65aacc0e2e4c17dca6780e364a65009d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribes from a MQTT topic.  <a href="#ga65aacc0e2e4c17dca6780e364a65009d">More...</a><br/></td></tr>
<tr class="separator:ga65aacc0e2e4c17dca6780e364a65009d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b939c28f2c4b04784dee17d82fa4bf3"><td class="memItemLeft" align="right" valign="top">mqtt_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga4b939c28f2c4b04784dee17d82fa4bf3">mqtt_publish</a> (struct mqtt_connection *conn, uint16_t *mid, char *topic, uint8_t *payload, uint32_t payload_size, mqtt_qos_level_t qos_level, mqtt_retain_t retain)</td></tr>
<tr class="memdesc:ga4b939c28f2c4b04784dee17d82fa4bf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish to a MQTT topic.  <a href="#ga4b939c28f2c4b04784dee17d82fa4bf3">More...</a><br/></td></tr>
<tr class="separator:ga4b939c28f2c4b04784dee17d82fa4bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8ce71ca9713ff36af302dad8117baa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#gae8ce71ca9713ff36af302dad8117baa7">mqtt_set_username_password</a> (struct mqtt_connection *conn, char *username, char *password)</td></tr>
<tr class="memdesc:gae8ce71ca9713ff36af302dad8117baa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the user name and password for a MQTT client.  <a href="#gae8ce71ca9713ff36af302dad8117baa7">More...</a><br/></td></tr>
<tr class="separator:gae8ce71ca9713ff36af302dad8117baa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga123bcd0293d27e403fdc09df5afc83bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt-engine.html#ga123bcd0293d27e403fdc09df5afc83bf">mqtt_set_last_will</a> (struct mqtt_connection *conn, char *topic, char *message, mqtt_qos_level_t qos)</td></tr>
<tr class="memdesc:ga123bcd0293d27e403fdc09df5afc83bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the last will topic and message for a MQTT client.  <a href="#ga123bcd0293d27e403fdc09df5afc83bf">More...</a><br/></td></tr>
<tr class="separator:ga123bcd0293d27e403fdc09df5afc83bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This application is an engine for MQTT v3.1. </p>
<p>It supports QoS Levels 0 and 1.</p>
<p>MQTT is a Client Server publish/subscribe messaging transport protocol. It is light weight, open, simple, and designed so as to be easy to implement. These characteristics make it ideal for use in many situations, including constrained environments such as for communication in Machine to Machine (M2M) and Internet of Things (IoT) contexts where a small code footprint is required and/or network bandwidth is at a premium.</p>
<p>The protocol runs over TCP/IP, more specifically tcp_socket. Its features include:</p>
<ul>
<li>Use of the publish/subscribe message pattern which provides one-to-many message distribution and decoupling of applications.</li>
<li>A messaging transport that is agnostic to the content of the payload. Three qualities of service for message delivery: &ndash; "At most once" (0), where messages are delivered according to the best efforts of the operating environment. Message loss can occur. This level could be used, for example, with ambient sensor data where it does not matter if an individual reading is lost as the next one will be published soon after. &ndash;"At least once" (1), where messages are assured to arrive but duplicates can occur. &ndash; "Exactly once" (2), where message are assured to arrive exactly once. This level could be used, for example, with billing systems where duplicate or lost messages could lead to incorrect charges being applied. This QoS level is currently not supported in this implementation.</li>
<li>A small transport overhead and protocol exchanges minimized to reduce network traffic.</li>
<li><p class="startli">A mechanism, Last Will, to notify interested parties when an abnormal disconnection occurs.</p>
<p class="startli">The protocol specification and other useful information can be found here: <a href="http://mqtt.org">http://mqtt.org</a> </p>
</li>
</ul>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga43290b4fd95095e09218029620a67894"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* mqtt_event_callback_t)(struct mqtt_connection *m, <a class="el" href="group__mqtt-engine.html#gaca6b39d8cd48e315ea885c3f715a7ff3">mqtt_event_t</a> event, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MQTT event callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>A pointer to a MQTT connection </td></tr>
    <tr><td class="paramname">event</td><td>The event number </td></tr>
    <tr><td class="paramname">data</td><td>A user-defined pointer</td></tr>
  </table>
  </dd>
</dl>
<p>The MQTT socket event callback function gets called whenever there is an event on a MQTT connection, such as the connection getting connected or closed. </p>

<p>Definition at line <a class="el" href="mqtt_8h_source.html#l00296">296</a> of file <a class="el" href="mqtt_8h_source.html">mqtt.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga1620a294655deb636329bd8e01f03298"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqtt_status_t mqtt_connect </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>keep_alive</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects to a MQTT broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">host</td><td>IP address of the broker to connect to. </td></tr>
    <tr><td class="paramname">port</td><td>Port of the broker to connect to, default is MQTT port is 1883. </td></tr>
    <tr><td class="paramname">keep_alive</td><td>Keep alive timer in seconds. Used by broker to handle client disc. Defines the maximum time interval between two messages from the client. Shall be min 1.5 x report interval. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MQTT_STATUS_OK or an error status</dd></dl>
<p>This function connects to a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01320">1320</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="uip-nd6_8c_source.html#l00124">ipaddr</a>, <a class="el" href="process_8c_source.html#l00323">process_post()</a>, and <a class="el" href="uip_8h_source.html#l01009">uip_ipaddr_copy</a>.</p>

</div>
</div>
<a class="anchor" id="gaaddcf82027650f40ecce36f9593cdc8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mqtt_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnects from a MQTT broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection.</td></tr>
  </table>
  </dd>
</dl>
<p>This function disconnects from a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01357">1357</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="process_8c_source.html#l00323">process_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b939c28f2c4b04784dee17d82fa4bf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqtt_status_t mqtt_publish </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>mid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>payload_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mqtt_qos_level_t&#160;</td>
          <td class="paramname"><em>qos_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mqtt_retain_t&#160;</td>
          <td class="paramname"><em>retain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish to a MQTT topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">mid</td><td>A pointer to message ID. </td></tr>
    <tr><td class="paramname">topic</td><td>A pointer to the topic to subscribe to. </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the topic payload. </td></tr>
    <tr><td class="paramname">payload_size</td><td>Payload size. </td></tr>
    <tr><td class="paramname">qos_level</td><td>Quality Of Service level to use. Currently supports 0, 1. </td></tr>
    <tr><td class="paramname">retain</td><td>If the RETAIN flag is set to 1, in a PUBLISH Packet sent by a Client to a Server, the Server MUST store the Application Message and its QoS, so that it can be delivered to future subscribers whose subscriptions match its topic name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MQTT_STATUS_OK or some error status</dd></dl>
<p>This function publishes to a topic on a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01422">1422</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="process_8c_source.html#l00323">process_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ga47325599f7b63929a44d590a9d950abc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqtt_status_t mqtt_register </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct process *&#160;</td>
          <td class="paramname"><em>app_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__mqtt-engine.html#ga43290b4fd95095e09218029620a67894">mqtt_event_callback_t</a>&#160;</td>
          <td class="paramname"><em>event_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_segment_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the MQTT engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">app_process</td><td>A pointer to the application process handling the MQTT connection. </td></tr>
    <tr><td class="paramname">client_id</td><td>A pointer to the MQTT client ID. </td></tr>
    <tr><td class="paramname">event_callback</td><td>Callback function responsible for handling the callback from MQTT engine. </td></tr>
    <tr><td class="paramname">max_segment_size</td><td>The TCP segment size to use for this MQTT/TCP connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MQTT_STATUS_OK or MQTT_STATUS_INVALID_ARGS_ERROR</dd></dl>
<p>This function initializes the MQTT engine and shall be called before any other MQTT function. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01289">1289</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="list_8c_source.html#l00143">list_add()</a>.</p>

</div>
</div>
<a class="anchor" id="ga123bcd0293d27e403fdc09df5afc83bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mqtt_set_last_will </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mqtt_qos_level_t&#160;</td>
          <td class="paramname"><em>qos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the last will topic and message for a MQTT client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">topic</td><td>A pointer to the Last Will topic. </td></tr>
    <tr><td class="paramname">message</td><td>A pointer to the Last Will message (payload). </td></tr>
    <tr><td class="paramname">qos</td><td>The desired QoS level.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets clients Last Will topic and message (payload). If the Will Flag is set to 1 (using the function) this indicates that, if the Connect request is accepted, a Will Message MUST be stored on the Server and associated with the Network Connection. The Will Message MUST be published when the Network Connection is subsequently closed.</p>
<p>This functionality can be used to get notified that a device has disconnected from the broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01475">1475</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

</div>
</div>
<a class="anchor" id="gae8ce71ca9713ff36af302dad8117baa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mqtt_set_username_password </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the user name and password for a MQTT client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">username</td><td>A pointer to the user name. </td></tr>
    <tr><td class="paramname">password</td><td>A pointer to the password.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets clients user name and password to use when connecting to a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01454">1454</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga44f6693627d94ddbecb0f354e3826d44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqtt_status_t mqtt_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>mid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mqtt_qos_level_t&#160;</td>
          <td class="paramname"><em>qos_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribes to a MQTT topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">mid</td><td>A pointer to message ID. </td></tr>
    <tr><td class="paramname">topic</td><td>A pointer to the topic to subscribe to. </td></tr>
    <tr><td class="paramname">qos_level</td><td>Quality Of Service level to use. Currently supports 0, 1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MQTT_STATUS_OK or some error status</dd></dl>
<p>This function subscribes to a topic on a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01369">1369</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="process_8c_source.html#l00323">process_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ga65aacc0e2e4c17dca6780e364a65009d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqtt_status_t mqtt_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct mqtt_connection *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>mid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribes from a MQTT topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A pointer to the MQTT connection. </td></tr>
    <tr><td class="paramname">mid</td><td>A pointer to message ID. </td></tr>
    <tr><td class="paramname">topic</td><td>A pointer to the topic to unsubscribe from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MQTT_STATUS_OK or some error status</dd></dl>
<p>This function unsubscribes from a topic on a MQTT broker. </p>

<p>Definition at line <a class="el" href="mqtt_8c_source.html#l01397">1397</a> of file <a class="el" href="mqtt_8c_source.html">mqtt.c</a>.</p>

<p>References <a class="el" href="process_8c_source.html#l00323">process_post()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 6 2017 15:45:29 for Contiki-NG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
