<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Contiki-NG: cc2538 rtimer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cc2538 rtimer<div class="ingroups"><a class="el" href="group__cc2538.html">The TI cc2538 System-on-Chip</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of the rtimer module for the cc2538.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:cpu_2cc2538_2rtimer-arch_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cpu_2cc2538_2rtimer-arch_8c.html">rtimer-arch.c</a></td></tr>
<tr class="memdesc:cpu_2cc2538_2rtimer-arch_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the arch-specific rtimer functions for the cc2538. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:cpu_2cc2538_2rtimer-arch_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cpu_2cc2538_2rtimer-arch_8h.html">rtimer-arch.h</a></td></tr>
<tr class="memdesc:cpu_2cc2538_2rtimer-arch_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the cc2538 rtimer driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab84335ec495695cccd7f49c967e75baa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#gab84335ec495695cccd7f49c967e75baa">rtimer_arch_now</a>()&#160;&#160;&#160;(T1CNTL + (T1CNTH &lt;&lt; 8))</td></tr>
<tr class="separator:gab84335ec495695cccd7f49c967e75baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa52e494f9a26390231d998237b1b849a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#gaa52e494f9a26390231d998237b1b849a">rtimer_arch_init</a> (void)</td></tr>
<tr class="memdesc:gaa52e494f9a26390231d998237b1b849a"><td class="mdescLeft">&#160;</td><td class="mdescRight">We don't need to explicitly initialise anything but this routine is required by the API.  <a href="#gaa52e494f9a26390231d998237b1b849a">More...</a><br/></td></tr>
<tr class="separator:gaa52e494f9a26390231d998237b1b849a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac69ae14f718f5f7b78b101a034d67c3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#gac69ae14f718f5f7b78b101a034d67c3a">rtimer_arch_schedule</a> (rtimer_clock_t t)</td></tr>
<tr class="memdesc:gac69ae14f718f5f7b78b101a034d67c3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules an rtimer task to be triggered at time t.  <a href="#gac69ae14f718f5f7b78b101a034d67c3a">More...</a><br/></td></tr>
<tr class="separator:gac69ae14f718f5f7b78b101a034d67c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27bd31b76f1f5952b1fb9043d56818a1"><td class="memItemLeft" align="right" valign="top">rtimer_clock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#ga27bd31b76f1f5952b1fb9043d56818a1">rtimer_arch_next_trigger</a> (void)</td></tr>
<tr class="memdesc:ga27bd31b76f1f5952b1fb9043d56818a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time of the next scheduled rtimer trigger.  <a href="#ga27bd31b76f1f5952b1fb9043d56818a1">More...</a><br/></td></tr>
<tr class="separator:ga27bd31b76f1f5952b1fb9043d56818a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab84335ec495695cccd7f49c967e75baa"><td class="memItemLeft" align="right" valign="top">rtimer_clock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#gab84335ec495695cccd7f49c967e75baa">rtimer_arch_now</a> ()</td></tr>
<tr class="memdesc:gab84335ec495695cccd7f49c967e75baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current real-time clock time.  <a href="#gab84335ec495695cccd7f49c967e75baa">More...</a><br/></td></tr>
<tr class="separator:gab84335ec495695cccd7f49c967e75baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92b9b9425323f703c952201cc45c2f34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc2538-rtimer.html#ga92b9b9425323f703c952201cc45c2f34">rtimer_isr</a> ()</td></tr>
<tr class="memdesc:ga92b9b9425323f703c952201cc45c2f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">The rtimer ISR.  <a href="#ga92b9b9425323f703c952201cc45c2f34">More...</a><br/></td></tr>
<tr class="separator:ga92b9b9425323f703c952201cc45c2f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Implementation of the rtimer module for the cc2538. </p>
<p>The rtimer runs on the Sleep Timer. This is a design choice, as many parts of Contiki like rtimers with a value of RTIMER_ARCH_SECOND being a power of two. The ST runs on the 32kHz clock, which can provide us with an excellent value of 32768 for RTIMER_ARCH_SECOND.</p>
<p>Additionally, since the ST keeps running in PM2, we can do things like drop to PM2 and schedule a wake-up time through the rtimer API.</p>
<dl class="section note"><dt>Note</dt><dd>If the 32kHz clock is running on the 32kHz RC OSC, the rtimer is not 100% accurate (the RC OSC does not run at exactly 32.768 kHz). For applications requiring higher accuracy, the 32kHz clock should be changed to use the XOSC as its source. To see which low-frequency OSC the 32kHz clock is running on, see <a class="el" href="cpu_2cc2538_2clock_8c.html" title="Clock driver implementation for the TI cc2538. ">cpu/cc2538/clock.c</a>.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="cpu_2cc2538_2clock_8c.html" title="Clock driver implementation for the TI cc2538. ">cpu/cc2538/clock.c</a> </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gab84335ec495695cccd7f49c967e75baa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rtimer_clock_t rtimer_arch_now</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(T1CNTL + (T1CNTH &lt;&lt; 8))</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__rt.html#gae646864933baa81ca646c96fa6f9f803" title="Get the current clock time. ">RTIMER_NOW()</a> </dd></dl>

<p>Definition at line <a class="el" href="cpu_2cc253x_2rtimer-arch_8h_source.html#l00056">56</a> of file <a class="el" href="cpu_2cc253x_2rtimer-arch_8h_source.html">rtimer-arch.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa52e494f9a26390231d998237b1b849a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtimer_arch_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>We don't need to explicitly initialise anything but this routine is required by the API. </p>
<p>The Sleep Timer starts ticking automatically as soon as the device turns on. We don't need to turn on interrupts before the first call to <a class="el" href="group__cc2538-rtimer.html#gac69ae14f718f5f7b78b101a034d67c3a" title="Schedules an rtimer task to be triggered at time t. ">rtimer_arch_schedule()</a> </p>

<p>Definition at line <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html#l00060">60</a> of file <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html">rtimer-arch.c</a>.</p>

<p>Referenced by <a class="el" href="rtimer_8c_source.html#l00061">rtimer_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga27bd31b76f1f5952b1fb9043d56818a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rtimer_clock_t rtimer_arch_next_trigger </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the time of the next scheduled rtimer trigger. </p>
<dl class="section return"><dt>Returns</dt><dd>The time next rtimer ISR is scheduled for </dd></dl>

<p>Definition at line <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html#l00106">106</a> of file <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html">rtimer-arch.c</a>.</p>

</div>
</div>
<a class="anchor" id="gab84335ec495695cccd7f49c967e75baa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rtimer_clock_t rtimer_arch_now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current real-time clock time. </p>
<dl class="section return"><dt>Returns</dt><dd>The current rtimer time in ticks</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__rt.html#gae646864933baa81ca646c96fa6f9f803" title="Get the current clock time. ">RTIMER_NOW()</a> </dd></dl>

<p>Definition at line <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html#l00116">116</a> of file <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html">rtimer-arch.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac69ae14f718f5f7b78b101a034d67c3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtimer_arch_schedule </td>
          <td>(</td>
          <td class="paramtype">rtimer_clock_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules an rtimer task to be triggered at time t. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The time when the task will need executed. This is an absolute time, in other words the task will be executed AT time <em>t</em>, not IN <em>t</em> ticks </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html#l00072">72</a> of file <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html">rtimer-arch.c</a>.</p>

<p>Referenced by <a class="el" href="rtimer_8c_source.html#l00092">rtimer_run_next()</a>, and <a class="el" href="rtimer_8c_source.html#l00067">rtimer_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ga92b9b9425323f703c952201cc45c2f34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtimer_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The rtimer ISR. </p>
<p>Interrupts are only turned on when we have an rtimer task to schedule Once the interrupt fires, the task is called and then interrupts no longer get acknowledged until the next task needs scheduled. </p>

<p>Definition at line <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html#l00137">137</a> of file <a class="el" href="cpu_2cc2538_2rtimer-arch_8c_source.html">rtimer-arch.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 6 2017 15:45:24 for Contiki-NG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
