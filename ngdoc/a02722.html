<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ContikiNG: Dynamic heap memory allocator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ContikiNG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Dynamic heap memory allocator<div class="ingroups"><a class="el" href="a02727.html">Libraries</a> &raquo; <a class="el" href="a02793.html">Memory functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The heapmem module is a dynamic heap memory allocator similar to malloc() in standard C.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:a01499"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01499.html">heapmem.h</a></td></tr>
<tr class="memdesc:a01499"><td class="mdescLeft">&#160;</td><td class="mdescRight"><pre class="fragment">    Header file for the dynamic heap memory allocator.</pre> <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga39453f3b8cbbaea1ace1e902aa974623"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623">heapmem_alloc</a> (size_t size)</td></tr>
<tr class="memdesc:ga39453f3b8cbbaea1ace1e902aa974623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a chunk of memory in the heap.  <a href="#ga39453f3b8cbbaea1ace1e902aa974623">More...</a><br /></td></tr>
<tr class="separator:ga39453f3b8cbbaea1ace1e902aa974623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27b957694047b7c3df6207f43188332b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b">heapmem_realloc</a> (void *ptr, size_t size)</td></tr>
<tr class="memdesc:ga27b957694047b7c3df6207f43188332b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reallocate a chunk of memory in the heap.  <a href="#ga27b957694047b7c3df6207f43188332b">More...</a><br /></td></tr>
<tr class="separator:ga27b957694047b7c3df6207f43188332b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b1ae7d2b38279133406f5bee13b1246"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02722.html#ga1b1ae7d2b38279133406f5bee13b1246">heapmem_free</a> (void *ptr)</td></tr>
<tr class="memdesc:ga1b1ae7d2b38279133406f5bee13b1246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate a chunk of memory.  <a href="#ga1b1ae7d2b38279133406f5bee13b1246">More...</a><br /></td></tr>
<tr class="separator:ga1b1ae7d2b38279133406f5bee13b1246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b485e5167d1d2130731a63fd053efb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02722.html#ga7b485e5167d1d2130731a63fd053efb1">heapmem_stats</a> (heapmem_stats_t *stats)</td></tr>
<tr class="memdesc:ga7b485e5167d1d2130731a63fd053efb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain internal heapmem statistics regarding the allocated chunks.  <a href="#ga7b485e5167d1d2130731a63fd053efb1">More...</a><br /></td></tr>
<tr class="separator:ga7b485e5167d1d2130731a63fd053efb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The heapmem module is a dynamic heap memory allocator similar to malloc() in standard C. </p>
<p>The heap memory is managed in a block of static memory, whose size is determined at compile-time by setting HEAPMEM_CONF_ARENA_SIZE parameter. By default, the heap memory is only 1 bytes, which entails that this parameter must be set explicitly in order to be possible to use this module.</p>
<p>Each allocated memory object is referred to as a "chunk". The allocator manages free chunks in a double-linked list. While this adds some memory overhead compared to a single-linked list, it improves the performance of list management.</p>
<p>Internally, allocated chunks can be retrieved using the pointer to the allocated memory returned by <a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623" title="Allocate a chunk of memory in the heap. ">heapmem_alloc()</a> and <a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b" title="Reallocate a chunk of memory in the heap. ">heapmem_realloc()</a>, because the chunk structure immediately precedes the memory of the chunk.</p>
<dl class="section note"><dt>Note</dt><dd>This module does not contain a corresponding function to the standard C function calloc().</dd>
<dd>
Dynamic memory should be used carefully on memory-constrained, embedded systems, because fragmentation may be induced through various allocation/deallocation patterns, and no guarantees are given regarding the availability of memory. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga39453f3b8cbbaea1ace1e902aa974623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39453f3b8cbbaea1ace1e902aa974623">&#9670;&nbsp;</a></span>heapmem_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* heapmem_alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a chunk of memory in the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated memory chunk, or NULL if the allocation failed.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b" title="Reallocate a chunk of memory in the heap. ">heapmem_realloc</a> </dd>
<dd>
<a class="el" href="a02722.html#ga1b1ae7d2b38279133406f5bee13b1246" title="Deallocate a chunk of memory. ">heapmem_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="a01496_source.html#l00327">327</a> of file <a class="el" href="a01496_source.html">heapmem.c</a>.</p>

</div>
</div>
<a id="ga1b1ae7d2b38279133406f5bee13b1246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b1ae7d2b38279133406f5bee13b1246">&#9670;&nbsp;</a></span>heapmem_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void heapmem_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate a chunk of memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>A pointer to a chunk that has been allocated using <a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623" title="Allocate a chunk of memory in the heap. ">heapmem_alloc()</a> or <a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b" title="Reallocate a chunk of memory in the heap. ">heapmem_realloc()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If ptr is NULL, this function will return immediately without without performing any action.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623" title="Allocate a chunk of memory in the heap. ">heapmem_alloc</a> </dd>
<dd>
<a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b" title="Reallocate a chunk of memory in the heap. ">heapmem_realloc</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="a01496_source.html#l00371">371</a> of file <a class="el" href="a01496_source.html">heapmem.c</a>.</p>

</div>
</div>
<a id="ga27b957694047b7c3df6207f43188332b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27b957694047b7c3df6207f43188332b">&#9670;&nbsp;</a></span>heapmem_realloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* heapmem_realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reallocate a chunk of memory in the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>A pointer to a chunk that has been allocated using <a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623" title="Allocate a chunk of memory in the heap. ">heapmem_alloc()</a> or <a class="el" href="a02722.html#ga27b957694047b7c3df6207f43188332b" title="Reallocate a chunk of memory in the heap. ">heapmem_realloc()</a>. </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated memory chunk, or NULL if the allocation failed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If ptr is NULL, this function behaves the same as heapmem_alloc. </dd>
<dd>
If ptr is not NULL and size is zero, the function deallocates the chunk and returns NULL.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a02722.html#ga39453f3b8cbbaea1ace1e902aa974623" title="Allocate a chunk of memory in the heap. ">heapmem_alloc</a> </dd>
<dd>
<a class="el" href="a02722.html#ga1b1ae7d2b38279133406f5bee13b1246" title="Deallocate a chunk of memory. ">heapmem_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="a01496_source.html#l00408">408</a> of file <a class="el" href="a01496_source.html">heapmem.c</a>.</p>

</div>
</div>
<a id="ga7b485e5167d1d2130731a63fd053efb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b485e5167d1d2130731a63fd053efb1">&#9670;&nbsp;</a></span>heapmem_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void heapmem_stats </td>
          <td>(</td>
          <td class="paramtype">heapmem_stats_t *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain internal heapmem statistics regarding the allocated chunks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>A pointer to an object of type heapmem_stats_t, which will be filled when calling this function.</td></tr>
  </table>
  </dd>
</dl>
<p>This function makes it possible to gain visibility into the internal structure of the heap. One can thus obtain information regarding the amount of memory allocated, overhead used for memory management, and the number of chunks allocated. By using this information, developers can tune their software to use the heapmem allocator more efficiently. </p>

<p class="definition">Definition at line <a class="el" href="a01496_source.html#l00488">488</a> of file <a class="el" href="a01496_source.html">heapmem.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 29 2017 15:33:28 for ContikiNG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
