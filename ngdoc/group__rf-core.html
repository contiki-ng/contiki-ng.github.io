<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Contiki-NG: CC13xx/CC26xx RF core</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CC13xx/CC26xx RF core<div class="ingroups"><a class="el" href="group__cc26xx.html">The TI CC26xx and CC13xx CPUs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Different flavours of chips of the CC13xx/CC26xx family have different radio capability.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__rf-core-prop"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core-prop.html">CC13xx Prop mode driver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__rf-core-ble"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core-ble.html">CC13xx/CC26xx BLE driver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__rf-core-ieee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core-ieee.html">CC13xx/CC26xx IEEE mode driver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__rf-core-15-4g-modes"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core-15-4g-modes.html">IEEE 802.15.4g Frequency Bands and Modes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__rf-switch"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-switch.html">RF Switch</a></td></tr>
<tr class="memdesc:group__rf-switch"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for RF switch support. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:rf-core_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf-core_8c.html">rf-core.c</a></td></tr>
<tr class="memdesc:rf-core_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the CC13xx/CC26xx RF core driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:rf-core_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf-core_8h.html">rf-core.h</a></td></tr>
<tr class="memdesc:rf-core_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the CC13xx/CC26xx RF core driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrf__core__primary__mode__s.html">rf_core_primary_mode_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A data strcuture representing the radio's primary mode of operation.  <a href="structrf__core__primary__mode__s.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gacab061407336de3e1dc0ac7200a4ae52"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structrf__core__primary__mode__s.html">rf_core_primary_mode_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#gacab061407336de3e1dc0ac7200a4ae52">rf_core_primary_mode_t</a></td></tr>
<tr class="memdesc:gacab061407336de3e1dc0ac7200a4ae52"><td class="mdescLeft">&#160;</td><td class="mdescRight">A data strcuture representing the radio's primary mode of operation.  <a href="#gacab061407336de3e1dc0ac7200a4ae52">More...</a><br/></td></tr>
<tr class="separator:gacab061407336de3e1dc0ac7200a4ae52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga51540b0f7f73535dffd44f92db9181be"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga51540b0f7f73535dffd44f92db9181be">rf_core_is_accessible</a> (void)</td></tr>
<tr class="memdesc:ga51540b0f7f73535dffd44f92db9181be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the RF core is accessible.  <a href="#ga51540b0f7f73535dffd44f92db9181be">More...</a><br/></td></tr>
<tr class="separator:ga51540b0f7f73535dffd44f92db9181be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4689cc9b99c51c980c2a622cc18d7aed"><td class="memItemLeft" align="right" valign="top">uint_fast8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga4689cc9b99c51c980c2a622cc18d7aed">rf_core_send_cmd</a> (uint32_t cmd, uint32_t *<a class="el" href="group__srf06-common-peripherals.html#ga13ec8fa3710e1f3f5937b97712fa9ab8">status</a>)</td></tr>
<tr class="memdesc:ga4689cc9b99c51c980c2a622cc18d7aed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command to the RF core.  <a href="#ga4689cc9b99c51c980c2a622cc18d7aed">More...</a><br/></td></tr>
<tr class="separator:ga4689cc9b99c51c980c2a622cc18d7aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga873b71896775161e47ae7a1435e1274e"><td class="memItemLeft" align="right" valign="top">uint_fast8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga873b71896775161e47ae7a1435e1274e">rf_core_wait_cmd_done</a> (void *cmd)</td></tr>
<tr class="memdesc:ga873b71896775161e47ae7a1435e1274e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block and wait for a Radio op to complete.  <a href="#ga873b71896775161e47ae7a1435e1274e">More...</a><br/></td></tr>
<tr class="separator:ga873b71896775161e47ae7a1435e1274e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73af1f7ff1360df7bbe22d452708eaa4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga73af1f7ff1360df7bbe22d452708eaa4">rf_core_power_up</a> (void)</td></tr>
<tr class="memdesc:ga73af1f7ff1360df7bbe22d452708eaa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on power to the RFC and boot it.  <a href="#ga73af1f7ff1360df7bbe22d452708eaa4">More...</a><br/></td></tr>
<tr class="separator:ga73af1f7ff1360df7bbe22d452708eaa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3a37b7eca605bd48aff1bdef012d696"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#gaf3a37b7eca605bd48aff1bdef012d696">rf_core_start_rat</a> (void)</td></tr>
<tr class="memdesc:gaf3a37b7eca605bd48aff1bdef012d696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the CM0 RAT.  <a href="#gaf3a37b7eca605bd48aff1bdef012d696">More...</a><br/></td></tr>
<tr class="separator:gaf3a37b7eca605bd48aff1bdef012d696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2db04de52c2963a2ecd5bbb1d5b6d125"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga2db04de52c2963a2ecd5bbb1d5b6d125">rf_core_stop_rat</a> (void)</td></tr>
<tr class="memdesc:ga2db04de52c2963a2ecd5bbb1d5b6d125"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the CM0 RAT synchronously.  <a href="#ga2db04de52c2963a2ecd5bbb1d5b6d125">More...</a><br/></td></tr>
<tr class="separator:ga2db04de52c2963a2ecd5bbb1d5b6d125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3482358e225cb9c6ec1427abd585f75c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3482358e225cb9c6ec1427abd585f75c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga3482358e225cb9c6ec1427abd585f75c">rf_core_power_down</a> (void)</td></tr>
<tr class="memdesc:ga3482358e225cb9c6ec1427abd585f75c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable RFCORE clock domain in the MCU VD and turn off the RFCORE PD. <br/></td></tr>
<tr class="separator:ga3482358e225cb9c6ec1427abd585f75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b63c8d4913a225c142215860f120272"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga7b63c8d4913a225c142215860f120272">rf_core_set_modesel</a> (void)</td></tr>
<tr class="memdesc:ga7b63c8d4913a225c142215860f120272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise RF APIs in the RF core.  <a href="#ga7b63c8d4913a225c142215860f120272">More...</a><br/></td></tr>
<tr class="separator:ga7b63c8d4913a225c142215860f120272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77c7898e8f9d2386fbfd0a0b598d7cf5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga77c7898e8f9d2386fbfd0a0b598d7cf5">rf_core_boot</a> (void)</td></tr>
<tr class="memdesc:ga77c7898e8f9d2386fbfd0a0b598d7cf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boot the RF Core.  <a href="#ga77c7898e8f9d2386fbfd0a0b598d7cf5">More...</a><br/></td></tr>
<tr class="separator:ga77c7898e8f9d2386fbfd0a0b598d7cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f81495bbcfd40a751a69f734e2f99ec"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga9f81495bbcfd40a751a69f734e2f99ec">rf_core_restart_rat</a> (void)</td></tr>
<tr class="memdesc:ga9f81495bbcfd40a751a69f734e2f99ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart the CM0 RAT.  <a href="#ga9f81495bbcfd40a751a69f734e2f99ec">More...</a><br/></td></tr>
<tr class="separator:ga9f81495bbcfd40a751a69f734e2f99ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0977e84f82357f934a4475bf46526f8d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0977e84f82357f934a4475bf46526f8d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga0977e84f82357f934a4475bf46526f8d">rf_core_setup_interrupts</a> (bool poll_mode)</td></tr>
<tr class="memdesc:ga0977e84f82357f934a4475bf46526f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup RF core interrupts. <br/></td></tr>
<tr class="separator:ga0977e84f82357f934a4475bf46526f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68b437acc839fa4c10d77922476fb03b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga68b437acc839fa4c10d77922476fb03b">rf_core_cmd_done_en</a> (bool fg, bool poll_mode)</td></tr>
<tr class="memdesc:ga68b437acc839fa4c10d77922476fb03b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupt on command done.  <a href="#ga68b437acc839fa4c10d77922476fb03b">More...</a><br/></td></tr>
<tr class="separator:ga68b437acc839fa4c10d77922476fb03b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga749456480e64330ea5ba0022bf4160cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga749456480e64330ea5ba0022bf4160cc">rf_core_cmd_done_dis</a> (bool poll_mode)</td></tr>
<tr class="memdesc:ga749456480e64330ea5ba0022bf4160cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the LAST_CMD_DONE and LAST_FG_CMD_DONE interrupts.  <a href="#ga749456480e64330ea5ba0022bf4160cc">More...</a><br/></td></tr>
<tr class="separator:ga749456480e64330ea5ba0022bf4160cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7125e37b11803111d5f0982d32aeb736"><td class="memItemLeft" align="right" valign="top">rfc_radioOp_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga7125e37b11803111d5f0982d32aeb736">rf_core_get_last_radio_op</a> (void)</td></tr>
<tr class="memdesc:ga7125e37b11803111d5f0982d32aeb736"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the most recent proto-dependent Radio Op.  <a href="#ga7125e37b11803111d5f0982d32aeb736">More...</a><br/></td></tr>
<tr class="separator:ga7125e37b11803111d5f0982d32aeb736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21a55d177b22c451ec5598df3da6a31e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga21a55d177b22c451ec5598df3da6a31e">rf_core_init_radio_op</a> (rfc_radioOp_t *buf, uint16_t len, uint16_t command)</td></tr>
<tr class="memdesc:ga21a55d177b22c451ec5598df3da6a31e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare a buffer to host a Radio Op.  <a href="#ga21a55d177b22c451ec5598df3da6a31e">More...</a><br/></td></tr>
<tr class="separator:ga21a55d177b22c451ec5598df3da6a31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac0b5f79a5fc2c8178668b54116afe9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#gaac0b5f79a5fc2c8178668b54116afe9d">rf_core_primary_mode_register</a> (const <a class="el" href="group__rf-core.html#gacab061407336de3e1dc0ac7200a4ae52">rf_core_primary_mode_t</a> *mode)</td></tr>
<tr class="memdesc:gaac0b5f79a5fc2c8178668b54116afe9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a primary mode for radio operation.  <a href="#gaac0b5f79a5fc2c8178668b54116afe9d">More...</a><br/></td></tr>
<tr class="separator:gaac0b5f79a5fc2c8178668b54116afe9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c67ddc593eda0bdced56700a1c96c6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0c67ddc593eda0bdced56700a1c96c6f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#ga0c67ddc593eda0bdced56700a1c96c6f">rf_core_primary_mode_abort</a> (void)</td></tr>
<tr class="memdesc:ga0c67ddc593eda0bdced56700a1c96c6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the currently running primary radio op. <br/></td></tr>
<tr class="separator:ga0c67ddc593eda0bdced56700a1c96c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae62e0e1c7cf350576a6cae496cd6f2f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae62e0e1c7cf350576a6cae496cd6f2f5"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf-core.html#gae62e0e1c7cf350576a6cae496cd6f2f5">rf_core_primary_mode_restore</a> (void)</td></tr>
<tr class="memdesc:gae62e0e1c7cf350576a6cae496cd6f2f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the currently running primary radio op. <br/></td></tr>
<tr class="separator:gae62e0e1c7cf350576a6cae496cd6f2f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Different flavours of chips of the CC13xx/CC26xx family have different radio capability. </p>
<p>For example, the CC2650 can operate in IEEE 802.15.4 mode at 2.4GHz, but it can also operate in BLE mode. The CC1310 only supports sub-ghz mode.</p>
<p>However, there are many radio functionalities that are identical across all chips. The rf-core driver provides support for this common functionality </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gacab061407336de3e1dc0ac7200a4ae52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrf__core__primary__mode__s.html">rf_core_primary_mode_s</a>  <a class="el" href="group__rf-core.html#gacab061407336de3e1dc0ac7200a4ae52">rf_core_primary_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A data strcuture representing the radio's primary mode of operation. </p>
<p>The CC13xx / CC26xx radio supports up to potentially 3 modes: IEEE, Prop and BLE. Within Contiki, we assume that the radio is by default in one of IEEE or Prop in order to support standard 6LoWPAN / .15.4 operation. The BLE mode interrupts this so called "primary" mode in order to send BLE adv messages. Once BLE is done advertising, we need to be able to restore the previous .15.4 mode. Unfortunately, the only way this can be done with NETSTACK_RADIO API is by fully power-cycling the radio, which is something we do not want to do.</p>
<p>Thus, we declare a secondary data structure for primary mode drivers (IEEE or Prop). We use this data structure to issue "soft off" and "back on" commands. Soft off in this context means stopping RX (e.g. the respective IEEE RX operation), but without shutting down the RF core (which is what NETSTACK_RADIO.off() would have done). We then remember what mode we were using in order to be able to re-enter RX mode for this mode.</p>
<p>A NETSTACK_RADIO driver will declare those two functions somewhere within its module of implementation. During its <a class="el" href="group__cc2538-rf.html#gaee24874ac3a06e235eae06bc77703417">init()</a> routine, it will notify the RF core module so that the latter can abort and restore operations. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga77c7898e8f9d2386fbfd0a0b598d7cf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_boot </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Boot the RF Core. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>This function will perform the CM0 boot sequence. It will first power it up and then start the RAT. If a patch is required, then the mode driver must not call this function and perform the sequence manually, applying patches after boot and before calling <a class="el" href="group__rf-core.html#gaf3a37b7eca605bd48aff1bdef012d696" title="Start the CM0 RAT. ">rf_core_start_rat()</a>.</p>
<p>The function will return RF_CORE_CMD_ERROR if any of those steps fails. If the boot sequence fails to complete, the RF Core will be powered down. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00405">405</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00344">rf_core_power_down()</a>, <a class="el" href="rf-core_8c_source.html#l00235">rf_core_power_up()</a>, and <a class="el" href="rf-core_8c_source.html#l00284">rf_core_start_rat()</a>.</p>

</div>
</div>
<a class="anchor" id="ga749456480e64330ea5ba0022bf4160cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rf_core_cmd_done_dis </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>poll_mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the LAST_CMD_DONE and LAST_FG_CMD_DONE interrupts. </p>
<p>This is used within TX routines after TX has completed</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__rf-core.html#ga68b437acc839fa4c10d77922476fb03b" title="Enable interrupt on command done. ">rf_core_cmd_done_en()</a> </dd></dl>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00490">490</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga68b437acc839fa4c10d77922476fb03b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rf_core_cmd_done_en </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>poll_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable interrupt on command done. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fg</td><td>set true to enable irq on foreground command done and false for background commands or if not in ieee mode. </td></tr>
    <tr><td class="paramname">poll_mode</td><td>true if the driver is in poll mode</td></tr>
  </table>
  </dd>
</dl>
<p>This is used within TX routines in order to be able to sleep the CM3 and wake up after TX has finished</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__rf-core.html#ga749456480e64330ea5ba0022bf4160cc" title="Disable the LAST_CMD_DONE and LAST_FG_CMD_DONE interrupts. ">rf_core_cmd_done_dis()</a> </dd></dl>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00480">480</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7125e37b11803111d5f0982d32aeb736"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rfc_radioOp_t * rf_core_get_last_radio_op </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the most recent proto-dependent Radio Op. </p>
<dl class="section return"><dt>Returns</dt><dd>The pointer</dd></dl>
<p>The RF Core driver will remember the most recent proto-dependent Radio OP issued, so that other modules can inspect its type and state at a subsequent stage. The assumption is that those commands will be issued by a function that will then return. The following commands will be "remembered"</p>
<ul>
<li>All BLE Radio Ops (0x18nn)</li>
<li>All Prop Radio Ops (0x38nn)</li>
<li>IEEE BG Radio Ops (0x28nn)</li>
</ul>
<p>The following commands are assumed to be executed synchronously and will thus not be remembered by the core and not returned by this function:</p>
<ul>
<li>Direct commands</li>
<li>Proto-independent commands (including Radio Ops and Immediate ones)</li>
<li>IEEE FG Radio Ops (0x2Cxx)</li>
</ul>
<p>This assumes that all commands will be sent to the radio using <a class="el" href="group__rf-core.html#ga4689cc9b99c51c980c2a622cc18d7aed" title="Sends a command to the RF core. ">rf_core_send_cmd()</a> </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00497">497</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga21a55d177b22c451ec5598df3da6a31e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rf_core_init_radio_op </td>
          <td>(</td>
          <td class="paramtype">rfc_radioOp_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare a buffer to host a Radio Op. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to the buffer that will host the Radio Op </td></tr>
    <tr><td class="paramname">len</td><td>The buffer's length </td></tr>
    <tr><td class="paramname">command</td><td>The command ID</td></tr>
  </table>
  </dd>
</dl>
<p>The caller is responsible to allocate the buffer</p>
<p>This function will not check whether the buffer is large enough to hold the command. This is the caller's responsibility</p>
<p>This function will wipe out the buffer's contents. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00503">503</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00284">rf_core_start_rat()</a>, and <a class="el" href="rf-core_8c_source.html#l00312">rf_core_stop_rat()</a>.</p>

</div>
</div>
<a class="anchor" id="ga51540b0f7f73535dffd44f92db9181be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_is_accessible </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the RF core is accessible. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RF_CORE_ACCESSIBLE</td><td>The core is powered and ready for access </td></tr>
    <tr><td class="paramname">RF_CORE_NOT_ACCESSIBLE</td><td>The core is not ready</td></tr>
  </table>
  </dd>
</dl>
<p>If this function returns RF_CORE_NOT_ACCESSIBLE, <a class="el" href="group__rf-core.html#ga73af1f7ff1360df7bbe22d452708eaa4" title="Turn on power to the RFC and boot it. ">rf_core_power_up()</a> must be called before any attempt to access the core. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00117">117</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00344">rf_core_power_down()</a>, <a class="el" href="rf-core_8c_source.html#l00126">rf_core_send_cmd()</a>, <a class="el" href="rf-core_8c_source.html#l00446">rf_core_setup_interrupts()</a>, <a class="el" href="ieee-mode_8c_source.html#l00307">rf_is_on()</a>, and <a class="el" href="ieee-mode_8c_source.html#l00325">transmitting()</a>.</p>

</div>
</div>
<a class="anchor" id="ga73af1f7ff1360df7bbe22d452708eaa4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rf_core_power_up </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on power to the RFC and boot it. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR </dd></dl>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00235">235</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00126">rf_core_send_cmd()</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00405">rf_core_boot()</a>.</p>

</div>
</div>
<a class="anchor" id="gaac0b5f79a5fc2c8178668b54116afe9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rf_core_primary_mode_register </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__rf-core.html#gacab061407336de3e1dc0ac7200a4ae52">rf_core_primary_mode_t</a> *&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a primary mode for radio operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>A pointer to the struct representing the mode</td></tr>
  </table>
  </dd>
</dl>
<p>A normal NESTACK_RADIO driver will normally register itself by calling this function during its own <a class="el" href="group__cc2538-rf.html#gaee24874ac3a06e235eae06bc77703417">init()</a>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__rf-core.html#gacab061407336de3e1dc0ac7200a4ae52" title="A data strcuture representing the radio&#39;s primary mode of operation. ">rf_core_primary_mode_t</a> </dd></dl>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00512">512</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f81495bbcfd40a751a69f734e2f99ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_restart_rat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restart the CM0 RAT. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>This function restarts the CM0 RAT and therefore resynchornizes it with RTC. To achieve good timing accuracy, it should be called periodically. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00427">427</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00344">rf_core_power_down()</a>, <a class="el" href="rf-core_8c_source.html#l00284">rf_core_start_rat()</a>, and <a class="el" href="rf-core_8c_source.html#l00312">rf_core_stop_rat()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4689cc9b99c51c980c2a622cc18d7aed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint_fast8_t rf_core_send_cmd </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a command to the RF core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The command value or a pointer to a command buffer </td></tr>
    <tr><td class="paramname">status</td><td>A pointer to a variable which will hold the status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>This function supports all three types of command (Radio OP, immediate and direct)</p>
<p>For immediate and Radio OPs, cmd is a pointer to the data structure containing the command and its parameters. This data structure must be 4-byte aligned.</p>
<p>For direct commands, cmd contains the value of the command alongside its parameters. This value will be written to CMDSTA verbatim, so the command ID must be in the 16 high bits, and the 2 LS bits must be set to 01 by the caller.</p>
<p>The caller is responsible of allocating and populating cmd for Radio OP and immediate commands</p>
<p>The caller is responsible for allocating status</p>
<p>For immediate commands and radio Ops, this function will set the command's status field to RF_CORE_RADIO_OP_STATUS_IDLE before sending it to the RF </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00126">126</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00117">rf_core_is_accessible()</a>.</p>

<p>Referenced by <a class="el" href="ieee-mode_8c_source.html#l00364">get_cca_info()</a>, <a class="el" href="ieee-mode_8c_source.html#l00400">get_rssi()</a>, <a class="el" href="ieee-mode_8c_source.html#l00531">rf_cmd_ieee_rx()</a>, <a class="el" href="rf-core_8c_source.html#l00235">rf_core_power_up()</a>, <a class="el" href="rf-core_8c_source.html#l00284">rf_core_start_rat()</a>, <a class="el" href="rf-core_8c_source.html#l00312">rf_core_stop_rat()</a>, and <a class="el" href="ieee-mode_8c_source.html#l00325">transmitting()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7b63c8d4913a225c142215860f120272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_set_modesel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise RF APIs in the RF core. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>Depending on chip family and capability, this function will set the correct value to PRCM.RFCMODESEL </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00382">382</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3a37b7eca605bd48aff1bdef012d696"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_start_rat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the CM0 RAT. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>This function must be called each time the CM0 boots. The boot sequence can be performed automatically by calling <a class="el" href="group__rf-core.html#ga77c7898e8f9d2386fbfd0a0b598d7cf5" title="Boot the RF Core. ">rf_core_boot()</a> if patches are not required. If patches are required then the patches must be applied after power up and before calling this function. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00284">284</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00503">rf_core_init_radio_op()</a>, <a class="el" href="rf-core_8c_source.html#l00126">rf_core_send_cmd()</a>, and <a class="el" href="rf-core_8c_source.html#l00192">rf_core_wait_cmd_done()</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00405">rf_core_boot()</a>, and <a class="el" href="rf-core_8c_source.html#l00427">rf_core_restart_rat()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2db04de52c2963a2ecd5bbb1d5b6d125"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rf_core_stop_rat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the CM0 RAT synchronously. </p>
<dl class="section return"><dt>Returns</dt><dd>RF_CORE_CMD_OK or RF_CORE_CMD_ERROR</dd></dl>
<p>This function is not strictly necessary, but through calling it it's possibly to learn the RAT / RTC offset, which useful to get accurate radio timestamps. </p>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00312">312</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>References <a class="el" href="rf-core_8c_source.html#l00503">rf_core_init_radio_op()</a>, <a class="el" href="rf-core_8c_source.html#l00126">rf_core_send_cmd()</a>, and <a class="el" href="rf-core_8c_source.html#l00192">rf_core_wait_cmd_done()</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00344">rf_core_power_down()</a>, and <a class="el" href="rf-core_8c_source.html#l00427">rf_core_restart_rat()</a>.</p>

</div>
</div>
<a class="anchor" id="ga873b71896775161e47ae7a1435e1274e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint_fast8_t rf_core_wait_cmd_done </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block and wait for a Radio op to complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>A pointer to any command's structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RF_CORE_CMD_OK</td><td>the command completed with status _DONE_OK </td></tr>
    <tr><td class="paramname">RF_CORE_CMD_ERROR</td><td>Timeout exceeded or the command completed with status _DONE_xxx (e.g. RF_CORE_RADIO_OP_STATUS_DONE_TIMEOUT) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rf-core_8c_source.html#l00192">192</a> of file <a class="el" href="rf-core_8c_source.html">rf-core.c</a>.</p>

<p>Referenced by <a class="el" href="rf-core_8c_source.html#l00284">rf_core_start_rat()</a>, and <a class="el" href="rf-core_8c_source.html#l00312">rf_core_stop_rat()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 31 2017 23:29:15 for Contiki-NG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
