<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Contiki-NG: CC13xx/CC26xx Random Number Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CC13xx/CC26xx Random Number Generator<div class="ingroups"><a class="el" href="group__cc26xx.html">The TI CC26xx and CC13xx CPUs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver for the CC13xx/CC26xx Random Number Generator.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:arch_2cpu_2cc26xx-cc13xx_2random_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c.html">random.c</a></td></tr>
<tr class="memdesc:arch_2cpu_2cc26xx-cc13xx_2random_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file overrides <a class="el" href="os_2lib_2random_8c_source.html">os/lib/random.c</a> and calls SoC-specific RNG functions. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:soc-trng_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="soc-trng_8c.html">soc-trng.c</a></td></tr>
<tr class="memdesc:soc-trng_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the CC13xx/CC26xx RNG driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:soc-trng_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="soc-trng_8h.html">soc-trng.h</a></td></tr>
<tr class="memdesc:soc-trng_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the CC13xx/CC26xx TRNG driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga53c814b918862832c79e3995be7e3785"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga53c814b918862832c79e3995be7e3785">SOC_TRNG_CACHE_LEN</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga53c814b918862832c79e3995be7e3785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the random number cache.  <a href="#ga53c814b918862832c79e3995be7e3785">More...</a><br/></td></tr>
<tr class="separator:ga53c814b918862832c79e3995be7e3785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf58022381eca7886a4a885bf84f16042"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf58022381eca7886a4a885bf84f16042"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#gaf58022381eca7886a4a885bf84f16042">SOC_TRNG_RAND_ASYNC_REQUEST_ERROR</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaf58022381eca7886a4a885bf84f16042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Async request rejected. <br/></td></tr>
<tr class="separator:gaf58022381eca7886a4a885bf84f16042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga270cf0de70781d01e76f87c92841b589"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga270cf0de70781d01e76f87c92841b589"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga270cf0de70781d01e76f87c92841b589">SOC_TRNG_RAND_ASYNC_REQUEST_OK</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga270cf0de70781d01e76f87c92841b589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Async request accepted. <br/></td></tr>
<tr class="separator:ga270cf0de70781d01e76f87c92841b589"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5fe9090f7f84b2a4613b2819e2521a64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5fe9090f7f84b2a4613b2819e2521a64"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga5fe9090f7f84b2a4613b2819e2521a64">soc_trng_callback_t</a> )(uint64_t rand)</td></tr>
<tr class="memdesc:ga5fe9090f7f84b2a4613b2819e2521a64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a callback to be provided as an argument to <a class="el" href="group__cc26xx-trng.html#gaaec53709a3a51640e2c8cf9b21a5045c" title="Request a 64-bit, configurable-entropy random number. ">soc_trng_rand_asynchronous()</a> <br/></td></tr>
<tr class="separator:ga5fe9090f7f84b2a4613b2819e2521a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3b38526f57c5311c58c1440e18f3cebe"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga3b38526f57c5311c58c1440e18f3cebe">random_rand</a> (void)</td></tr>
<tr class="memdesc:ga3b38526f57c5311c58c1440e18f3cebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a new random number using the hardware TRNG.  <a href="#ga3b38526f57c5311c58c1440e18f3cebe">More...</a><br/></td></tr>
<tr class="separator:ga3b38526f57c5311c58c1440e18f3cebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1450c78dbb54fb9f7ae681908eace9d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga1450c78dbb54fb9f7ae681908eace9d5">random_init</a> (unsigned short seed)</td></tr>
<tr class="memdesc:ga1450c78dbb54fb9f7ae681908eace9d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function required by the API.  <a href="#ga1450c78dbb54fb9f7ae681908eace9d5">More...</a><br/></td></tr>
<tr class="separator:ga1450c78dbb54fb9f7ae681908eace9d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
TRNG functions</h2></td></tr>
<tr class="memitem:gada2eebe5a39eca3995f9654debc6078f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#gada2eebe5a39eca3995f9654debc6078f">soc_trng_rand_synchronous</a> ()</td></tr>
<tr class="memdesc:gada2eebe5a39eca3995f9654debc6078f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a minimum entropy random number.  <a href="#gada2eebe5a39eca3995f9654debc6078f">More...</a><br/></td></tr>
<tr class="separator:gada2eebe5a39eca3995f9654debc6078f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec53709a3a51640e2c8cf9b21a5045c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#gaaec53709a3a51640e2c8cf9b21a5045c">soc_trng_rand_asynchronous</a> (uint32_t samples, <a class="el" href="group__cc26xx-trng.html#ga5fe9090f7f84b2a4613b2819e2521a64">soc_trng_callback_t</a> cb)</td></tr>
<tr class="memdesc:gaaec53709a3a51640e2c8cf9b21a5045c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a 64-bit, configurable-entropy random number.  <a href="#gaaec53709a3a51640e2c8cf9b21a5045c">More...</a><br/></td></tr>
<tr class="separator:gaaec53709a3a51640e2c8cf9b21a5045c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40a3e1b31c8551fe667d074047724562"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga40a3e1b31c8551fe667d074047724562"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc26xx-trng.html#ga40a3e1b31c8551fe667d074047724562">soc_trng_init</a> (void)</td></tr>
<tr class="memdesc:ga40a3e1b31c8551fe667d074047724562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the CC13xx/CC26xx TRNG driver. <br/></td></tr>
<tr class="separator:ga40a3e1b31c8551fe667d074047724562"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver for the CC13xx/CC26xx Random Number Generator. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga53c814b918862832c79e3995be7e3785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOC_TRNG_CACHE_LEN&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the random number cache. </p>
<p>Each slot holds 4 16-bit numbers </p>

<p>Definition at line <a class="el" href="soc-trng_8c_source.html#l00054">54</a> of file <a class="el" href="soc-trng_8c_source.html">soc-trng.c</a>.</p>

<p>Referenced by <a class="el" href="soc-trng_8c_source.html#l00191">soc_trng_rand_asynchronous()</a>, and <a class="el" href="soc-trng_8c_source.html#l00145">soc_trng_rand_synchronous()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga1450c78dbb54fb9f7ae681908eace9d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void random_init </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function required by the API. </p>
<p>Seed the cc2538 random number generator.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seed</td><td>Ignored. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c_source.html#l00058">58</a> of file <a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c_source.html">random.c</a>.</p>

<p>References <a class="el" href="soc-trng_8c_source.html#l00298">soc_trng_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3b38526f57c5311c58c1440e18f3cebe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short random_rand </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a new random number using the hardware TRNG. </p>
<p>Generates a new random number using the cc2538 RNG.</p>
<dl class="section return"><dt>Returns</dt><dd>The random number. </dd></dl>

<p>Definition at line <a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c_source.html#l00048">48</a> of file <a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c_source.html">random.c</a>.</p>

<p>References <a class="el" href="soc-trng_8c_source.html#l00145">soc_trng_rand_synchronous()</a>.</p>

</div>
</div>
<a class="anchor" id="gaaec53709a3a51640e2c8cf9b21a5045c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t soc_trng_rand_asynchronous </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cc26xx-trng.html#ga5fe9090f7f84b2a4613b2819e2521a64">soc_trng_callback_t</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request a 64-bit, configurable-entropy random number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>Controls the entropy generated for the random number </td></tr>
    <tr><td class="paramname">cb</td><td>A callback function to be called when the generation is complete </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SOC_TRNG_RAND_ASYNC_REQUEST_ERROR</td><td>There was an error adding request. </td></tr>
    <tr><td class="paramname">SOC_TRNG_RAND_ASYNC_REQUEST_OK</td><td>Request successfully registered</td></tr>
  </table>
  </dd>
</dl>
<p>This function is asynchronous, it will start generation of a random number and will return. The caller must provide a callback that will be called when the generation is complete. This callback must either use the random number immediately or store it, since it will not be possible to retrieve it again later form the soc-trng module.</p>
<p>Only one generation can be active at any given point in time. If this function gets called when a generation is already in progress, it will return SOC_TRNG_RAND_ASYNC_REQUEST_ERROR.</p>
<p>The function will configure the TRNG to generate entropy by sampling the FROs for a number clock cycles controlled by the samples argument. The 8 LS bits of this argument will be truncated by CC13xxware/CC26xxware and the resulting number of clock cycles will be (samples &gt;&gt; 8) * 2^8. Increasing the value of this argument increases entropy, but it also increases latency. Maximum entropy can be generated by passing SOC_TRNG_REFILL_CYCLES_MAX, but this will take approximately 350ms. Consult the chip's technical reference manual for advice on what would constitute sufficient entropy for random numbers meant to be used for crypto.</p>
<p>While this function is executing, calls to <a class="el" href="group__cc26xx-trng.html#gada2eebe5a39eca3995f9654debc6078f" title="Returns a minimum entropy random number. ">soc_trng_rand_synchronous()</a> will return cached random numbers.</p>
<p>This function is not re-entrant and must not be called from an interrupt context. </p>

<p>Definition at line <a class="el" href="soc-trng_8c_source.html#l00191">191</a> of file <a class="el" href="soc-trng_8c_source.html">soc-trng.c</a>.</p>

<p>References <a class="el" href="cc26xx-cc13xx_2lpm_8c_source.html#l00537">lpm_register_module()</a>, <a class="el" href="soc-trng_8c_source.html#l00054">SOC_TRNG_CACHE_LEN</a>, <a class="el" href="soc-trng_8h_source.html#l00051">SOC_TRNG_RAND_ASYNC_REQUEST_ERROR</a>, and <a class="el" href="soc-trng_8h_source.html#l00052">SOC_TRNG_RAND_ASYNC_REQUEST_OK</a>.</p>

</div>
</div>
<a class="anchor" id="gada2eebe5a39eca3995f9654debc6078f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t soc_trng_rand_synchronous </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a minimum entropy random number. </p>
<dl class="section return"><dt>Returns</dt><dd>The random number</dd></dl>
<p>This function is synchronous. This function will make sure the PERIPH PD is powered and the TRNG is clocked. The function will then configure the TRNG to generate a random number of minimum entropy. These numbers are not suitable for cryptographic usage, but their generation is very fast.</p>
<p>If a high-entropy random number is currently being generated, this function will return a cached random number. The cache is of configurable size and can hold a maximum SOC_TRNG_CONF_CACHE_LEN numbers. If the cache gets emptied while high-entropy generation is in progress (e.g. because a function requested many random numbers in a row), this function will return 0. Care must therefore be taken when the return value is 0, which can also be a valid random number.</p>
<p>This function can be safely called from within an interrupt context. </p>

<p>Definition at line <a class="el" href="soc-trng_8c_source.html#l00145">145</a> of file <a class="el" href="soc-trng_8c_source.html">soc-trng.c</a>.</p>

<p>References <a class="el" href="soc-trng_8c_source.html#l00054">SOC_TRNG_CACHE_LEN</a>.</p>

<p>Referenced by <a class="el" href="arch_2cpu_2cc26xx-cc13xx_2random_8c_source.html#l00048">random_rand()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 31 2017 23:29:15 for Contiki-NG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
