<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ContikiNG: RE-Mote power management driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ContikiNG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">RE-Mote power management driver<div class="ingroups"><a class="el" href="a02685.html">Remote</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The power management module is composed by a nano-watt (gating) timer and an ultra-low power MCU, driving the RE-Mote power supply when connected to an external battery, and allowing an application to enter a so-called "shutdown
mode".  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:a05535"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a05535.html">power-mgmt.h</a></td></tr>
<tr class="memdesc:a05535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the RE-Mote Power Management driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management return values</h2></td></tr>
<tr class="memitem:gaddf49f5fed3274da72c23555bd623a3a"><td class="memItemLeft" align="right" valign="top"><a id="gaddf49f5fed3274da72c23555bd623a3a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_SUCCESS</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gaddf49f5fed3274da72c23555bd623a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f3b3eaf831fde7ba36cdf5ff153fe42"><td class="memItemLeft" align="right" valign="top"><a id="ga6f3b3eaf831fde7ba36cdf5ff153fe42"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_ERROR</b>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:ga6f3b3eaf831fde7ba36cdf5ff153fe42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad825a79b03dc95a00c0bbe195a193a58"><td class="memItemLeft" align="right" valign="top"><a id="gad825a79b03dc95a00c0bbe195a193a58"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_MAX_BITS</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:gad825a79b03dc95a00c0bbe195a193a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management "done" signal</h2></td></tr>
<tr class="memitem:gaec2dab5f0164891fd115d184b3dc0fad"><td class="memItemLeft" align="right" valign="top"><a id="gaec2dab5f0164891fd115d184b3dc0fad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_SHUTDOWN_NOW</b>&#160;&#160;&#160;<a class="el" href="a02590.html#gab59b5d54cbd4879a00a960f68f9f59f9">GPIO_SET_PIN</a>(PM_DONE_PORT_BASE, PM_DONE_PIN_MASK)</td></tr>
<tr class="separator:gaec2dab5f0164891fd115d184b3dc0fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management timing values</h2></td></tr>
<tr class="memitem:ga7e46237bf59908a08fa1ae32ed22bd4f"><td class="memItemLeft" align="right" valign="top"><a id="ga7e46237bf59908a08fa1ae32ed22bd4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_1_MILISECOND</b>&#160;&#160;&#160;1000L</td></tr>
<tr class="separator:ga7e46237bf59908a08fa1ae32ed22bd4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dcd1dfa186d2fd9dc80044fa6242b96"><td class="memItemLeft" align="right" valign="top"><a id="ga7dcd1dfa186d2fd9dc80044fa6242b96"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_2_2_MILISECOND</b>&#160;&#160;&#160;2200L</td></tr>
<tr class="separator:ga7dcd1dfa186d2fd9dc80044fa6242b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga953ed6e1fe10e8d3301e91b823593f0f"><td class="memItemLeft" align="right" valign="top"><a id="ga953ed6e1fe10e8d3301e91b823593f0f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_3_MILISECOND</b>&#160;&#160;&#160;3000L</td></tr>
<tr class="separator:ga953ed6e1fe10e8d3301e91b823593f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbf098593aea3983a244af44cc8ce305"><td class="memItemLeft" align="right" valign="top"><a id="gacbf098593aea3983a244af44cc8ce305"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_10_MILISECOND</b>&#160;&#160;&#160;10000L</td></tr>
<tr class="separator:gacbf098593aea3983a244af44cc8ce305"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management commands</h2></td></tr>
<tr class="memitem:ga64d7071eb40d9f616bbfcc81553a0762"><td class="memItemLeft" align="right" valign="top"><a id="ga64d7071eb40d9f616bbfcc81553a0762"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>pm_cmd_t</b> </td></tr>
<tr class="separator:ga64d7071eb40d9f616bbfcc81553a0762"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management status and masks</h2></td></tr>
<tr class="memitem:gab3494abf6596dc2470a4c25a38280df1"><td class="memItemLeft" align="right" valign="top"><a id="gab3494abf6596dc2470a4c25a38280df1"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>pm_state_t</b> </td></tr>
<tr class="separator:gab3494abf6596dc2470a4c25a38280df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5782e550493cb7585b9be8c67f91893"><td class="memItemLeft" align="right" valign="top"><a id="gaa5782e550493cb7585b9be8c67f91893"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_SYSOFF_ON_MASK</b>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:gaa5782e550493cb7585b9be8c67f91893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0e803bf2644d00819978a1916a7f6de"><td class="memItemLeft" align="right" valign="top"><a id="gaf0e803bf2644d00819978a1916a7f6de"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_TIMER_ENABLED_MASK</b>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:gaf0e803bf2644d00819978a1916a7f6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a88cf97f81809fafec9a3e24fa61eb6"><td class="memItemLeft" align="right" valign="top"><a id="ga6a88cf97f81809fafec9a3e24fa61eb6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PM_AWAITING_RTC_EVENT_MASK</b>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:ga6a88cf97f81809fafec9a3e24fa61eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Power Management functions</h2></td></tr>
<tr class="memitem:ga2a96afd848a48f3630a1d957902fceba"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02714.html#ga2a96afd848a48f3630a1d957902fceba">pm_init</a> (void)</td></tr>
<tr class="memdesc:ga2a96afd848a48f3630a1d957902fceba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the Power Management driver.  <a href="#ga2a96afd848a48f3630a1d957902fceba">More...</a><br /></td></tr>
<tr class="separator:ga2a96afd848a48f3630a1d957902fceba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cd642140ce25141ffe79020cc6fa75d"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02714.html#ga9cd642140ce25141ffe79020cc6fa75d">pm_enable_timer</a> (void)</td></tr>
<tr class="memdesc:ga9cd642140ce25141ffe79020cc6fa75d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the shutdown mode, periodically driven by the Nano Timer.  <a href="#ga9cd642140ce25141ffe79020cc6fa75d">More...</a><br /></td></tr>
<tr class="separator:ga9cd642140ce25141ffe79020cc6fa75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c376de7fdc1ea04d0542dcf7c44bc79"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02714.html#ga7c376de7fdc1ea04d0542dcf7c44bc79">pm_disable_timer</a> (void)</td></tr>
<tr class="memdesc:ga7c376de7fdc1ea04d0542dcf7c44bc79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the Nano Timer.  <a href="#ga7c376de7fdc1ea04d0542dcf7c44bc79">More...</a><br /></td></tr>
<tr class="separator:ga7c376de7fdc1ea04d0542dcf7c44bc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga100871fee1b15fc74ddf45e91514599e"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02714.html#ga100871fee1b15fc74ddf45e91514599e">pm_get_state</a> (uint8_t *state)</td></tr>
<tr class="memdesc:ga100871fee1b15fc74ddf45e91514599e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current state of the power management module.  <a href="#ga100871fee1b15fc74ddf45e91514599e">More...</a><br /></td></tr>
<tr class="separator:ga100871fee1b15fc74ddf45e91514599e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a02492b550644003132b596b4209dd6"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02714.html#ga8a02492b550644003132b596b4209dd6">pm_get_firmware_version</a> (uint8_t *state)</td></tr>
<tr class="memdesc:ga8a02492b550644003132b596b4209dd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the firmware version of the power management module.  <a href="#ga8a02492b550644003132b596b4209dd6">More...</a><br /></td></tr>
<tr class="separator:ga8a02492b550644003132b596b4209dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The power management module is composed by a nano-watt (gating) timer and an ultra-low power MCU, driving the RE-Mote power supply when connected to an external battery, and allowing an application to enter a so-called "shutdown
mode". </p>
<p>RE-Mote power management and shutdown mode.</p>
<p>While in shutdown mode, only the RTCC and the power management block is on, effectively reducing the RE-Mote power consumption down to &lt;~200nA. The nano Timer allows the RE-Mote to be awaken off shutdown mode after a given period (from 100ms to 2 hours, default is 1 minute). To change the shutdown period, the R47 resistor (at the DELAY input pin, see the RE-Mote datasheet) has to be changed. See the TPL5110 datasheet ((Table 2 and 3) for more information about the R47 resistor value, below is a table resuming most common periods:</p>
<p>+---------&mdash;+---------&mdash;+ | R47 (Ohm) | Time | +---------&mdash;+---------&mdash;+ | 500 | 100ms | +---------&mdash;+---------&mdash;+ | 2.5K | 500ms | +---------&mdash;+---------&mdash;+ | 5.202K | 1s | +---------&mdash;+---------&mdash;+ | 22.021K | 1min | +---------&mdash;+---------&mdash;+ | 42.887K | 5min | +---------&mdash;+---------&mdash;+ | 57.434K | 10min | +---------&mdash;+---------&mdash;+ | 92.233K | 30min | +---------&mdash;+---------&mdash;+ | 170K | 2h | +---------&mdash;+---------&mdash;+</p>
<p>An application can enter the shutdown mode before the shutdown period expires by invoking the PM_SHUTDOWN_NOW macro. The on-board RTCC can also be used to drive the CC2538 off PM3 power mode, if the application requires to retain RAM. Note that while in shutdown mode the RE-Mote will be powered off.</p>
<dl class="section author"><dt>Author</dt><dd>Aitor Mejias <a href="#" onclick="location.href='mai'+'lto:'+'ame'+'ji'+'as@'+'zo'+'ler'+'ti'+'a.c'+'om'; return false;">ameji<span style="display: none;">.nosp@m.</span>as@z<span style="display: none;">.nosp@m.</span>olert<span style="display: none;">.nosp@m.</span>ia.c<span style="display: none;">.nosp@m.</span>om</a> Antonio Lignan <a href="#" onclick="location.href='mai'+'lto:'+'ali'+'na'+'n@z'+'ol'+'ert'+'ia'+'.co'+'m'; return false;">alina<span style="display: none;">.nosp@m.</span>n@zo<span style="display: none;">.nosp@m.</span>lerti<span style="display: none;">.nosp@m.</span>a.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7c376de7fdc1ea04d0542dcf7c44bc79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c376de7fdc1ea04d0542dcf7c44bc79">&#9670;&nbsp;</a></span>pm_disable_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t pm_disable_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the Nano Timer. </p>
<dl class="section return"><dt>Returns</dt><dd>PM_SUCCESS if successful, else PM_ERROR </dd></dl>

<p class="definition">Definition at line <a class="el" href="a05529_source.html#l00174">174</a> of file <a class="el" href="a05529_source.html">power-mgmt.c</a>.</p>

</div>
</div>
<a id="ga9cd642140ce25141ffe79020cc6fa75d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9cd642140ce25141ffe79020cc6fa75d">&#9670;&nbsp;</a></span>pm_enable_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t pm_enable_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the shutdown mode, periodically driven by the Nano Timer. </p>
<dl class="section return"><dt>Returns</dt><dd>PM_SUCCESS if successful, else PM_ERROR </dd></dl>

<p class="definition">Definition at line <a class="el" href="a05529_source.html#l00161">161</a> of file <a class="el" href="a05529_source.html">power-mgmt.c</a>.</p>

</div>
</div>
<a id="ga8a02492b550644003132b596b4209dd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a02492b550644003132b596b4209dd6">&#9670;&nbsp;</a></span>pm_get_firmware_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t pm_get_firmware_version </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the firmware version of the power management module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Pointer to a variable to save the state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PM_SUCCESS if successful, else PM_ERROR </dd></dl>

<p class="definition">Definition at line <a class="el" href="a05529_source.html#l00203">203</a> of file <a class="el" href="a05529_source.html">power-mgmt.c</a>.</p>

</div>
</div>
<a id="ga100871fee1b15fc74ddf45e91514599e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga100871fee1b15fc74ddf45e91514599e">&#9670;&nbsp;</a></span>pm_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t pm_get_state </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current state of the power management module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Pointer to a variable to save the state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PM_SUCCESS if successful, else PM_ERROR </dd></dl>

<p class="definition">Definition at line <a class="el" href="a05529_source.html#l00187">187</a> of file <a class="el" href="a05529_source.html">power-mgmt.c</a>.</p>

</div>
</div>
<a id="ga2a96afd848a48f3630a1d957902fceba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2a96afd848a48f3630a1d957902fceba">&#9670;&nbsp;</a></span>pm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t pm_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the Power Management driver. </p>
<dl class="section return"><dt>Returns</dt><dd>PM_SUCCESS if initialized, else PM_ERROR </dd></dl>

<p class="definition">Definition at line <a class="el" href="a05529_source.html#l00134">134</a> of file <a class="el" href="a05529_source.html">power-mgmt.c</a>.</p>

<p class="reference">References <a class="el" href="a00455_source.html#l00273">GPIO_SOFTWARE_CONTROL</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 29 2017 15:33:28 for ContikiNG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
